import{c as e,p as t,a as r,i as a,s as n,b as i,d as o,e as l,f as s,g as c,h as u,j as d,k as p,l as f,m as y,n as m,o as h,q as v,r as g,t as b,u as x,v as j,w as O,x as w,y as P,z as E,J as A,A as S,L as k,S as N,B as I,R as D,C,D as K,E as T,F as M,G as R,H as B,I as z,K as L,M as _,N as W,O as F,P as V,Q as $,T as H,U as G,V as q,W as U,X as Z,Y,Z as J,_ as Q,$ as X,a0 as ee,a1 as te,a2 as re,a3 as ae,a4 as ne,a5 as ie,a6 as oe,a7 as le,a8 as se,a9 as ce,aa as ue,ab as de,ac as pe,ad as fe,ae as ye,af as me,ag as he,ah as ve,ai as ge,aj as be,ak as xe,al as je,am as Oe,an as we,ao as Pe,ap as Ee,aq as Ae,ar as Se,as as ke,at as Ne,au as Ie,av as De,aw as Ce,ax as Ke,ay as Te,az as Me,aA as Re,aB as Be,aC as ze,aD as Le,aE as _e,aF as We,aG as Fe,aH as Ve,aI as $e,aJ as He,aK as Ge,aL as qe,aM as Ue,aN as Ze,aO as Ye,aP as Je,aQ as Qe,aR as Xe,aS as et,aT as tt,aU as rt,aV as at,aW as nt,aX as it,aY as ot,aZ as lt,a_ as st,a$ as ct,b0 as ut,b1 as dt,b2 as pt,b3 as ft,b4 as yt,b5 as mt,b6 as ht,b7 as vt,b8 as gt,b9 as bt}from"./index-CGlzCJWI.js";import{r as xt}from"./force-graph-BPqBp-4I.js";import{g as jt}from"./react-vendor-CEZjBCbl.js";var Ot=e=>null;Ot.displayName="Cell";var wt=e=>e.graphicalItems.polarItems,Pt=e([t,r],a),Et=e([wt,n,Pt],i),At=e([Et],o),St=e([At,l],s),kt=e([St,n,Et],c),Nt=e([St,n,Et],(e,t,r)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var a;return{value:u(e,null!==(a=t.dataKey)&&void 0!==a?a:r.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:u(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),It=()=>{},Dt=e([n,d,It,Nt,It,p,t],f),Ct=e([n,p,St,kt,y,t,Dt],m),Kt=e([Ct,n,h],v);function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach(function(t){Rt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e([n,Ct,Kt,t],g);var Bt,zt,Lt,_t=e([wt,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),Wt=[],Ft=(e,t,r)=>0===(null==r?void 0:r.length)?Wt:r,Vt=e([l,_t,Ft],(e,t,r)=>{var a,{chartData:n}=e;if(null!=t&&((a=null!=(null==t?void 0:t.data)&&t.data.length>0?t.data:n)&&a.length||null==r||(a=r.map(e=>Mt(Mt({},t.presentationProps),e.props))),null!=a))return a}),$t=e([Vt,_t,Ft],(e,t,r)=>{if(null!=e&&null!=t)return e.map((e,a)=>{var n,i,o=u(e,t.nameKey,t.name);return i=null!=r&&null!==(n=r[a])&&void 0!==n&&null!==(n=n.props)&&void 0!==n&&n.fill?r[a].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:b(o,t.dataKey),color:i,payload:e,type:t.legendType}})}),Ht=e([Vt,_t,Ft,x],(e,t,r,a)=>{if(null!=t&&null!=e)return function(e){var t,r,a,{pieSettings:n,displayedData:i,cells:o,offset:l}=e,{cornerRadius:s,startAngle:c,endAngle:d,dataKey:p,nameKey:f,tooltipType:y}=n,m=Math.abs(n.minAngle),h=wr(c,d),v=Math.abs(h),g=i.length<=1?0:null!==(t=n.paddingAngle)&&void 0!==t?t:0,b=i.filter(e=>0!==u(e,p,0)).length,x=v-b*m-(v>=360?b:b-1)*g,j=i.reduce((e,t)=>{var r=u(t,p,0);return e+(H(r)?r:0)},0);j>0&&(r=i.map((e,t)=>{var r,i=u(e,p,0),d=u(e,f,t),v=Or(n,l,e),b=(H(i)?i:0)/j,O=vr(vr({},e),o&&o[t]&&o[t].props),w=(r=t?a.endAngle+G(h)*g*(0!==i?1:0):c)+G(h)*((0!==i?m:0)+b*x),P=(r+w)/2,E=(v.innerRadius+v.outerRadius)/2,A=[{name:d,value:i,payload:O,dataKey:p,type:y}],S=q(v.cx,v.cy,E,P);return a=vr(vr(vr(vr({},n.presentationProps),{},{percent:b,cornerRadius:s,name:d,tooltipPayload:A,midAngle:P,middleRadius:E,tooltipPosition:S},O),v),{},{value:i,startAngle:r,endAngle:w,payload:O,paddingAngle:G(h)*g})}));return r}({offset:a,pieSettings:t,displayedData:e,cells:r})}),Gt={};function qt(){return Lt?zt:(Lt=1,zt=(Bt||(Bt=1,e=Gt,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPlainObject=function(e){if("object"!=typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return null!=t&&!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}),Gt).isPlainObject);var e}const Ut=jt(qt());function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach(function(t){Jt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Jt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qt(){return Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qt.apply(null,arguments)}var Xt=(e,t,r,a,n)=>{var i,o=r-a;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-o/2,",").concat(t+n),i+="L ".concat(e+r-o/2-a,",").concat(t+n),i+="L ".concat(e,",").concat(t," Z")},er={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tr=e=>{var t=j(e,er),{x:r,y:a,upperWidth:n,lowerWidth:i,height:o,className:l}=t,{animationEasing:s,animationDuration:c,animationBegin:u,isUpdateAnimationActive:d}=t,p=xt.useRef(),[f,y]=xt.useState(-1),m=xt.useRef(n),h=xt.useRef(i),v=xt.useRef(o),g=xt.useRef(r),b=xt.useRef(a),x=O(e,"trapezoid-");if(xt.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var e=p.current.getTotalLength();e&&y(e)}catch(t){}},[]),r!==+r||a!==+a||n!==+n||i!==+i||o!==+o||0===n&&0===i||0===o)return null;var k=w("recharts-trapezoid",l);if(!d)return xt.createElement("g",null,xt.createElement("path",Qt({},P(t,!0),{className:k,d:Xt(r,a,n,i,o)})));var N=m.current,I=h.current,D=v.current,C=g.current,K=b.current,T="0px ".concat(-1===f?1:f,"px"),M="".concat(f,"px 0px"),R=E(["strokeDasharray"],c,s);return xt.createElement(A,{animationId:x,key:x,canBegin:f>0,duration:c,easing:s,isActive:d,begin:u},e=>{var l=S(N,n,e),s=S(I,i,e),c=S(D,o,e),u=S(C,r,e),d=S(K,a,e);p.current&&(m.current=l,h.current=s,v.current=c,g.current=u,b.current=d);var f=e>0?{transition:R,strokeDasharray:M}:{strokeDasharray:T};return xt.createElement("path",Qt({},P(t,!0),{className:k,d:Xt(u,d,l,s,c),ref:p,style:Yt(Yt({},f),t.style)}))})},rr=["option","shapeType","propTransformer","activeClassName","isActive"];function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(r),!0).forEach(function(t){ir(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ar(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ir(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function or(e,t){return nr(nr({},t),e)}function lr(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return xt.createElement(D,r);case"trapezoid":return xt.createElement(tr,r);case"sector":return xt.createElement(I,r);case"symbols":if(function(e){return"symbols"===e}(t))return xt.createElement(N,r);break;default:return null}}function sr(e){var t,{option:r,shapeType:a,propTransformer:n=or,activeClassName:i="recharts-active-shape",isActive:o}=e,l=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,rr);if(xt.isValidElement(r))t=xt.cloneElement(r,nr(nr({},l),function(e){return xt.isValidElement(e)?e.props:e}(r)));else if("function"==typeof r)t=r(l);else if(Ut(r)&&"boolean"!=typeof r){var s=n(r,l);t=xt.createElement(lr,{shapeType:a,elementProps:s})}else{var c=l;t=xt.createElement(lr,{shapeType:a,elementProps:c})}return o?xt.createElement(k,{className:i},t):t}var cr=(e,t)=>{var r=C();return(a,n)=>i=>{null==e||e(a,n,i),r(K({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},ur=e=>{var t=C();return(r,a)=>n=>{null==e||e(r,a,n),t(T())}},dr=(e,t)=>{var r=C();return(a,n)=>i=>{null==e||e(a,n,i),r(M({activeIndex:String(n),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},pr=["onMouseEnter","onClick","onMouseLeave"],fr=["id"],yr=["id"];function mr(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(r),!0).forEach(function(t){gr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function br(){return br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},br.apply(null,arguments)}function xr(e){var t=xt.useMemo(()=>L(e.children,Ot),[e.children]),r=_(r=>$t(r,e.id,t));return null==r?null:xt.createElement(W,{legendPayload:r})}function jr(e){var{dataKey:t,nameKey:r,sectors:a,stroke:n,strokeWidth:i,fill:o,name:l,hide:s,tooltipType:c}=e;return{dataDefinedOnItem:a.map(e=>e.tooltipPayload),positions:a.map(e=>e.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:b(l,t),hide:s,type:c,color:o,unit:""}}}var Or=(e,t,r)=>{var{top:a,left:n,width:i,height:o}=t,l=ee(i,o),s=n+te(e.cx,i,i/2),c=a+te(e.cy,o,o/2),u=te(e.innerRadius,l,0),d=((e,t,r)=>te("function"==typeof t?t(e):t,r,.8*r))(r,e.outerRadius,l);return{cx:s,cy:c,innerRadius:u,outerRadius:d,maxRadius:e.maxRadius||Math.sqrt(i*i+o*o)/2}},wr=(e,t)=>G(t-e)*Math.min(Math.abs(t-e),360);function Pr(e){var{sectors:t,props:r,showLabels:a}=e,{label:n,labelLine:i,dataKey:o}=r;if(!a||!n||!t)return null;var l=R(r),s=P(n,!1),c=P(i,!1),d="object"==typeof n&&"offsetRadius"in n&&"number"==typeof n.offsetRadius&&n.offsetRadius||20,p=t.map((e,t)=>{var r,a,p=(e.startAngle+e.endAngle)/2,f=q(e.cx,e.cy,e.outerRadius+d,p),y=vr(vr(vr(vr({},l),e),{},{stroke:"none"},s),{},{index:t,textAnchor:(r=f.x,a=e.cx,r>a?"start":r<a?"end":"middle")},f),m=vr(vr(vr(vr({},l),e),{},{fill:"none",stroke:e.fill},c),{},{index:t,points:[q(e.cx,e.cy,e.outerRadius,p),f],key:"line"});return xt.createElement(k,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},i&&((e,t)=>{if(xt.isValidElement(e))return xt.cloneElement(e,t);if("function"==typeof e)return e(t);var r=w("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return xt.createElement(re,br({},t,{type:"linear",className:r}))})(i,m),((e,t,r)=>{if(xt.isValidElement(e))return xt.cloneElement(e,t);var a=r;if("function"==typeof e&&(a=e(t),xt.isValidElement(a)))return a;var n,i=w("recharts-pie-label-text",(n=e)&&"object"==typeof n&&"className"in n&&"string"==typeof n.className?n.className:"");return xt.createElement(ae,br({},t,{alignmentBaseline:"middle",className:i}),a)})(n,y,u(e,o)))});return xt.createElement(k,{className:"recharts-pie-labels"},p)}function Er(e){var{sectors:t,props:r,showLabels:a}=e,{label:n}=r;return"object"==typeof n&&null!=n&&"position"in n?xt.createElement(X,{label:n}):xt.createElement(Pr,{sectors:t,props:r,showLabels:a})}function Ar(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:n}=e,i=_(Z),{onMouseEnter:o,onClick:l,onMouseLeave:s}=n,c=mr(n,pr),u=cr(o,n.dataKey),d=ur(s),p=dr(l,n.dataKey);return null==t||0===t.length?null:xt.createElement(xt.Fragment,null,t.map((e,o)=>{if(0===(null==e?void 0:e.startAngle)&&0===(null==e?void 0:e.endAngle)&&1!==t.length)return null;var l=r&&String(o)===i,s=l?r:i?a:null,f=vr(vr({},e),{},{stroke:e.stroke,tabIndex:-1,[J]:o,[Y]:n.dataKey});return xt.createElement(k,br({tabIndex:-1,className:"recharts-pie-sector"},Q(c,e,o),{onMouseEnter:u(e,o),onMouseLeave:d(e,o),onClick:p(e,o),key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(o)}),xt.createElement(sr,br({option:s,isActive:l,shapeType:"sector"},f)))}))}function Sr(e){var{showLabels:t,sectors:r,children:a}=e,n=xt.useMemo(()=>t&&r?r.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[r,t]);return xt.createElement(U,{value:t?n:void 0},a)}function kr(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:s,inactiveShape:c,onAnimationStart:u,onAnimationEnd:d}=t,p=O(t,"recharts-pie-"),f=r.current,[y,m]=xt.useState(!1),h=xt.useCallback(()=>{"function"==typeof d&&d(),m(!1)},[d]),v=xt.useCallback(()=>{"function"==typeof u&&u(),m(!0)},[u]);return xt.createElement(Sr,{showLabels:!y,sectors:a},xt.createElement(A,{animationId:p,begin:i,duration:o,isActive:n,easing:l,onAnimationStart:v,onAnimationEnd:h,key:p},e=>{var n=[],i=a&&a[0],o=null==i?void 0:i.startAngle;return null==a||a.forEach((t,r)=>{var a=f&&f[r],i=r>0?$(t,"paddingAngle",0):0;if(a){var l=S(a.endAngle-a.startAngle,t.endAngle-t.startAngle,e),s=vr(vr({},t),{},{startAngle:o+i,endAngle:o+l+i});n.push(s),o=s.endAngle}else{var{endAngle:c,startAngle:u}=t,d=S(0,c-u,e),p=vr(vr({},t),{},{startAngle:o+i,endAngle:o+d+i});n.push(p),o=p.endAngle}}),r.current=n,xt.createElement(k,null,xt.createElement(Ar,{sectors:n,activeShape:s,inactiveShape:c,allOtherPieProps:t}))}),xt.createElement(Er,{showLabels:!y,sectors:a,props:t}),t.children)}var Nr={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!V.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Ir(e){var{id:t}=e,r=mr(e,fr),{hide:a,className:n,rootTabIndex:i}=e,o=xt.useMemo(()=>L(e.children,Ot),[e.children]),l=_(e=>Ht(e,t,o)),s=xt.useRef(null),c=w("recharts-pie",n);return a||null==l?(s.current=null,xt.createElement(k,{tabIndex:i,className:c})):xt.createElement(xt.Fragment,null,xt.createElement(F,{fn:jr,args:vr(vr({},e),{},{sectors:l})}),xt.createElement(k,{tabIndex:i,className:c},xt.createElement(kr,{props:vr(vr({},r),{},{sectors:l}),previousSectorsRef:s})))}function Dr(e){var t=j(e,Nr),{id:r}=t,a=mr(t,yr),n=R(a);return xt.createElement(B,{id:r,type:"pie"},e=>xt.createElement(xt.Fragment,null,xt.createElement(z,{type:"pie",id:e,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:n,maxRadius:t.maxRadius}),xt.createElement(xr,br({},a,{id:e})),xt.createElement(Ir,br({},a,{id:e}))))}Dr.displayName="Pie";var Cr=["x","y"];function Kr(){return Kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Kr.apply(null,arguments)}function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Mr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(r),!0).forEach(function(t){Rr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Br(e,t){var{x:r,y:a}=e,n=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,Cr),i="".concat(r),o=parseInt(i,10),l="".concat(a),s=parseInt(l,10),c="".concat(t.height||n.height),u=parseInt(c,10),d="".concat(t.width||n.width),p=parseInt(d,10);return Mr(Mr(Mr(Mr(Mr({},t),n),o?{x:o}:{}),s?{y:s}:{}),{},{height:u,width:p,name:t.name,radius:t.radius})}function zr(e){return xt.createElement(sr,Kr({shapeType:"rectangle",propTransformer:Br,activeClassName:"recharts-active-bar"},e))}var Lr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(r,a)=>{if(H(e))return e;var n=H(r)||ne(r);return n?e(r,a):(n||function(){throw new Error("Invariant failed")}(),t)}},_r=["onMouseEnter","onMouseLeave","onClick"],Wr=["value","background","tooltipPosition"],Fr=["id"],Vr=["onMouseEnter","onClick","onMouseLeave"];function $r(){return $r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$r.apply(null,arguments)}function Hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(r),!0).forEach(function(t){qr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ur(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Zr=e=>{var{dataKey:t,name:r,fill:a,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:a,value:b(r,t),payload:e}]};function Yr(e){var{dataKey:t,stroke:r,strokeWidth:a,fill:n,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:a,fill:n,dataKey:t,nameKey:void 0,name:b(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function Jr(e){var t=_(Z),{data:r,dataKey:a,background:n,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:s}=i,c=Ur(i,_r),u=cr(o,a),d=ur(l),p=dr(s,a);if(!n||null==r)return null;var f=P(n,!1);return xt.createElement(xt.Fragment,null,r.map((e,r)=>{var{value:i,background:o,tooltipPosition:l}=e,s=Ur(e,Wr);if(!o)return null;var y=u(e,r),m=d(e,r),h=p(e,r),v=Gr(Gr(Gr(Gr(Gr({option:n,isActive:String(r)===t},s),{},{fill:"#eee"},o),f),Q(c,e,r)),{},{onMouseEnter:y,onMouseLeave:m,onClick:h,dataKey:a,index:r,className:"recharts-bar-background-rectangle"});return xt.createElement(zr,$r({key:"background-bar-".concat(v.index)},v))}))}function Qr(e){var{showLabels:t,children:r,rects:a}=e,n=null==a?void 0:a.map(e=>{var t={x:e.x,y:e.y,width:e.width,height:e.height};return Gr(Gr({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return xt.createElement(he,{value:t?n:void 0},r)}function Xr(e){var{shape:t,activeBar:r,baseProps:a,entry:n,index:i,dataKey:o}=e,l=_(Z),s=_(ve),c=r&&String(i)===l&&(null==s||o===s),u=c?r:t;return xt.createElement(zr,$r({},a,n,{isActive:c,option:u,index:i,dataKey:o}))}function ea(e){var{shape:t,baseProps:r,entry:a,index:n,dataKey:i}=e;return xt.createElement(zr,$r({},r,a,{isActive:!1,option:t,index:n,dataKey:i}))}function ta(e){var{data:t,props:r}=e,a=R(r),{id:n}=a,i=Ur(a,Fr),{shape:o,dataKey:l,activeBar:s}=r,{onMouseEnter:c,onClick:u,onMouseLeave:d}=r,p=Ur(r,Vr),f=cr(c,l),y=ur(d),m=dr(u,l);return t?xt.createElement(xt.Fragment,null,t.map((e,t)=>xt.createElement(k,$r({className:"recharts-bar-rectangle"},Q(p,e,t),{onMouseEnter:f(e,t),onMouseLeave:y(e,t),onClick:m(e,t),key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(t)}),s?xt.createElement(Xr,{shape:o,activeBar:s,baseProps:i,entry:e,index:t,dataKey:l}):xt.createElement(ea,{shape:o,baseProps:i,entry:e,index:t,dataKey:l})))):null}function ra(e){var{props:t,previousRectanglesRef:r}=e,{data:a,layout:n,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:s,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,p=O(t,"recharts-bar-"),[f,y]=xt.useState(!1),m=!f,h=xt.useCallback(()=>{"function"==typeof c&&c(),y(!1)},[c]),v=xt.useCallback(()=>{"function"==typeof u&&u(),y(!0)},[u]);return xt.createElement(Qr,{showLabels:m,rects:a},xt.createElement(A,{animationId:p,begin:o,duration:l,isActive:i,easing:s,onAnimationEnd:h,onAnimationStart:v,key:p},e=>{var i=1===e?a:null==a?void 0:a.map((t,r)=>{var a=d&&d[r];if(a)return Gr(Gr({},t),{},{x:S(a.x,t.x,e),y:S(a.y,t.y,e),width:S(a.width,t.width,e),height:S(a.height,t.height,e)});if("horizontal"===n){var i=S(0,t.height,e);return Gr(Gr({},t),{},{y:t.y+t.height-i,height:i})}var o=S(0,t.width,e);return Gr(Gr({},t),{},{width:o})});return e>0&&(r.current=null!=i?i:null),null==i?null:xt.createElement(k,null,xt.createElement(ta,{props:t,data:i}))}),xt.createElement(X,{label:t.label}),t.children)}function aa(e){var t=xt.useRef(null);return xt.createElement(ra,{previousRectanglesRef:t,props:e})}var na=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:u(e,t)}};class ia extends xt.PureComponent{render(){var{hide:e,data:t,dataKey:r,className:a,xAxisId:n,yAxisId:i,needClip:o,background:l,id:s}=this.props;if(e||null==t)return null;var c=w("recharts-bar",a),u=s;return xt.createElement(k,{className:c,id:s},o&&xt.createElement("defs",null,xt.createElement(pe,{clipPathId:u,xAxisId:n,yAxisId:i})),xt.createElement(k,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(u,")"):void 0},xt.createElement(Jr,{data:t,dataKey:r,background:l,allOtherBarProps:this.props}),xt.createElement(aa,this.props)))}}var oa={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!V.isSsr,legendType:"rect",minPointSize:0,xAxisId:0,yAxisId:0};function la(e){var t,{xAxisId:r,yAxisId:a,hide:n,legendType:i,minPointSize:o,activeBar:l,animationBegin:s,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:p}=ce(r,a),f=ue(),y=ie(),m=L(e.children,Ot),h=_(t=>Oa(t,r,a,y,e.id,m));if("vertical"!==f&&"horizontal"!==f)return null;var v=null==h?void 0:h[0];return t=null==v||null==v.height||null==v.width?0:"vertical"===f?v.height/2:v.width/2,xt.createElement(de,{xAxisId:r,yAxisId:a,data:h,dataPointFormatter:na,errorBarOffset:t},xt.createElement(ia,$r({},e,{layout:f,needClip:p,data:h,xAxisId:r,yAxisId:a,hide:n,legendType:i,minPointSize:o,activeBar:l,animationBegin:s,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function sa(e){var t=j(e,oa),r=ie();return xt.createElement(B,{id:t.id,type:"bar"},e=>xt.createElement(xt.Fragment,null,xt.createElement(oe,{legendPayload:Zr(t)}),xt.createElement(F,{fn:Yr,args:t}),xt.createElement(le,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:se(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),xt.createElement(la,$r({},t,{id:e}))))}var ca=xt.memo(sa);function ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function da(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(r),!0).forEach(function(t){pa(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ua(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ca.displayName="Bar";var fa=e([Pe,(e,t,r,a,n)=>n],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),ya=e([fa],e=>null==e?void 0:e.maxBarSize),ma=(e,t,r)=>{var a=null!=r?r:e;if(!ne(a))return te(a,t,0)},ha=e([p,Pe,(e,t)=>t,(e,t,r)=>r,(e,t,r,a)=>a],(e,t,r,a,n)=>t.filter(t=>"horizontal"===e?t.xAxisId===r:t.yAxisId===a).filter(e=>e.isPanorama===n).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),va=e([ha,Ie,(e,t,r)=>"horizontal"===p(e)?De(e,"xAxis",t):De(e,"yAxis",r)],(e,t,r)=>{var a=e.filter(Ce),n=e.filter(e=>null==e.stackId),i=a.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{});return[...Object.entries(i).map(e=>{var[a,n]=e;return{stackId:a,dataKeys:n.map(e=>e.dataKey),barSize:ma(t,r,n[0].barSize)}}),...n.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:ma(t,r,e.barSize)}))]}),ga=(e,t,r,a)=>{var n,i;return"horizontal"===p(e)?(n=xe(e,"xAxis",t,a),i=je(e,"xAxis",t,a)):(n=xe(e,"yAxis",r,a),i=je(e,"yAxis",r,a)),we(n,i)};var ba=e([va,Ee,Ae,Se,(e,t,r,a,n)=>{var i,o,l=fa(e,t,r,a,n);if(null!=l){var s,c,u=p(e),d=Ee(e),{maxBarSize:f}=l,y=ne(f)?d:f;return"horizontal"===u?(s=xe(e,"xAxis",t,a),c=je(e,"xAxis",t,a)):(s=xe(e,"yAxis",r,a),c=je(e,"yAxis",r,a)),null!==(i=null!==(o=we(s,c,!0))&&void 0!==o?o:y)&&void 0!==i?i:0}},ga,ya],(e,t,r,a,n,i,o)=>{var l=ne(o)?t:o,s=function(e,t,r,a,n){var i=a.length;if(!(i<1)){var o,l=te(e,r,0,!0),s=[];if(Ke(a[0].barSize)){var c=!1,u=r/i,d=a.reduce((e,t)=>e+(t.barSize||0),0);(d+=(i-1)*l)>=r&&(d-=(i-1)*l,l=0),d>=r&&u>0&&(c=!0,d=i*(u*=.9));var p={offset:((r-d)/2|0)-l,size:0};o=a.reduce((e,t)=>{var r,a=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:p.offset+p.size+l,size:c?u:null!==(r=t.barSize)&&void 0!==r?r:0}}];return p=a[a.length-1].position,a},s)}else{var f=te(t,r,0,!0);r-2*f-(i-1)*l<=0&&(l=0);var y=(r-2*f-(i-1)*l)/i;y>1&&(y>>=0);var m=Ke(n)?Math.min(y,n):y;o=a.reduce((e,t,r)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:f+(y+l)*r+(y-m)/2,size:m}}],s)}return o}}(r,a,n!==i?n:i,e,l);return n!==i&&null!=s&&(s=s.map(e=>da(da({},e),{},{position:da(da({},e.position),{},{offset:e.position.offset-n/2})}))),s}),xa=e([ba,fa],(e,t)=>{if(null!=e&&null!=t){var r=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=r)return r.position}}),ja=e([(e,t,r,a)=>"horizontal"===p(e)?ke(e,"yAxis",r,a):ke(e,"xAxis",t,a),fa],(e,t)=>{var r=Ne(t);if(e&&null!=r&&null!=t){var{stackId:a}=t;if(null!=a){var n=e[a];if(n){var{stackedData:i}=n;if(i)return i.find(e=>e.key===r)}}}}),Oa=e([x,be,(e,t,r,a)=>xe(e,"xAxis",t,a),(e,t,r,a)=>xe(e,"yAxis",r,a),(e,t,r,a)=>je(e,"xAxis",t,a),(e,t,r,a)=>je(e,"yAxis",r,a),xa,p,Oe,ga,ja,fa,(e,t,r,a,n,i)=>i],(e,t,r,a,n,i,o,l,s,c,d,p,f)=>{var{chartData:y,dataStartIndex:m,dataEndIndex:h}=s;if(null!=p&&null!=o&&null!=t&&("horizontal"===l||"vertical"===l)&&null!=r&&null!=a&&null!=n&&null!=i&&null!=c){var v,{data:g}=p;if(null!=(v=null!=g&&g.length>0?g:null==y?void 0:y.slice(m,h+1)))return function(e){var{layout:t,barSettings:{dataKey:r,minPointSize:a},pos:n,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:s,yAxisTicks:c,stackedData:d,displayedData:p,offset:f,cells:y,parentViewBox:m}=e,h="horizontal"===t?l:o,v=d?h.scale.domain():null,g=fe({numericAxis:h});return p.map((e,p)=>{var h,b,x,j,O,w;d?h=ye(d[p],v):(h=u(e,r),Array.isArray(h)||(h=[g,h]));var P=Lr(a,0)(h[1],p);if("horizontal"===t){var E,[A,S]=[l.scale(h[0]),l.scale(h[1])];b=me({axis:o,ticks:s,bandSize:i,offset:n.offset,entry:e,index:p}),x=null!==(E=null!=S?S:A)&&void 0!==E?E:void 0,j=n.size;var k=A-S;if(O=ge(k)?0:k,w={x:b,y:f.top,width:j,height:f.height},Math.abs(P)>0&&Math.abs(O)<Math.abs(P)){var N=G(O||P)*(Math.abs(P)-Math.abs(O));x-=N,O+=N}}else{var[I,D]=[o.scale(h[0]),o.scale(h[1])];b=I,x=me({axis:l,ticks:c,bandSize:i,offset:n.offset,entry:e,index:p}),j=D-I,O=n.size,w={x:f.left,y:x,width:f.width,height:O},Math.abs(P)>0&&Math.abs(j)<Math.abs(P)&&(j+=G(j||P)*(Math.abs(P)-Math.abs(j)))}return null==b||null==x||null==j||null==O?null:Gr(Gr({},e),{},{x:b,y:x,width:j,height:O,value:d?h:h[1],payload:e,background:w,tooltipPosition:{x:b+j/2,y:x+O/2},parentViewBox:m},y&&y[p]&&y[p].props)}).filter(Boolean)}({layout:l,barSettings:p,pos:o,parentViewBox:t,bandSize:c,xAxis:r,yAxis:a,xAxisTicks:n,yAxisTicks:i,stackedData:d,displayedData:v,offset:e,cells:f})}});function wa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(r),!0).forEach(function(t){Ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wa(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ea(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Aa.apply(null,arguments)}function Sa(e){var t=C();return xt.useEffect(()=>(t(Te(e)),()=>{t(Me(e))})),null}function ka(e){var{x:t,y:r,segment:a,xAxisId:n,yAxisId:i,shape:o,className:l,ifOverflow:s}=e,c=ie(),u=Re(),d=_(e=>Be(e,n)),p=_(e=>ze(e,i)),f=_(e=>Le(e,"xAxis",n,c)),y=_(e=>Le(e,"yAxis",i,c)),m=_e(),h=He(t),v=He(r);if(!u||!m||null==d||null==p||null==f||null==y)return null;var g=((e,t,r,a,n,i,o,l,s)=>{var{x:c,y:u,width:d,height:p}=n;if(r){var{y:f}=s,y=e.y.apply(f,{position:i});if(ge(y))return null;if("discard"===s.ifOverflow&&!e.y.isInRange(y))return null;var m=[{x:c+d,y:y},{x:c,y:y}];return"left"===l?m.reverse():m}if(t){var{x:h}=s,v=e.x.apply(h,{position:i});if(ge(v))return null;if("discard"===s.ifOverflow&&!e.x.isInRange(v))return null;var g=[{x:v,y:u+p},{x:v,y:u}];return"top"===o?g.reverse():g}if(a){var{segment:b}=s,x=b.map(t=>e.apply(t,{position:i}));return"discard"===s.ifOverflow&&x.some(t=>!e.isInRange(t))?null:x}return null})(We({x:f,y:y}),h,v,a&&2===a.length,m,e.position,d.orientation,p.orientation,e);if(!g)return null;var[{x:b,y:x},{x:j,y:O}]=g,E=Pa(Pa({clipPath:"hidden"===s?"url(#".concat(u,")"):void 0},P(e,!0)),{},{x1:b,y1:x,x2:j,y2:O});return xt.createElement(k,{className:w("recharts-reference-line",l)},((e,t)=>xt.isValidElement(e)?xt.cloneElement(e,t):"function"==typeof e?e(t):xt.createElement("line",Aa({},t,{className:"recharts-reference-line-line"})))(o,E),xt.createElement(Fe,Ve({x1:b,y1:x,x2:j,y2:O}),xt.createElement($e,{label:e.label}),e.children))}function Na(e){return xt.createElement(xt.Fragment,null,xt.createElement(Sa,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y}),xt.createElement(ka,e))}class Ia extends xt.Component{render(){return xt.createElement(Na,this.props)}}Ea(Ia,"displayName","ReferenceLine"),Ea(Ia,"defaultProps",{ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var Da=["axis","item"],Ca=xt.forwardRef((e,t)=>xt.createElement(Ge,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Da,tooltipPayloadSearcher:qe,categoricalChartProps:e,ref:t}));function Ka(e){var t=C();return xt.useEffect(()=>{t(Ue(e))},[t,e]),null}var Ta=["width","height","layout"];function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ma.apply(null,arguments)}var Ra={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Ba=xt.forwardRef(function(e,t){var r,a=j(e.categoricalChartProps,Ra),{width:n,height:i,layout:o}=a,l=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(a,Ta);if(!Ze(n)||!Ze(i))return null;var{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,p={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return xt.createElement(Ye,{preloadedState:{options:p},reduxStoreName:null!==(r=a.id)&&void 0!==r?r:s},xt.createElement(Je,{chartData:a.data}),xt.createElement(Qe,{width:n,height:i,layout:o,margin:a.margin}),xt.createElement(Xe,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),xt.createElement(Ka,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),xt.createElement(et,Ma({width:n,height:i},l,{ref:t})))}),za=["item"],La={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},_a=xt.forwardRef((e,t)=>{var r=j(e,La);return xt.createElement(Ba,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:za,tooltipPayloadSearcher:qe,categoricalChartProps:r,ref:t})});const Wa=({active:e,payload:t,label:r,unit:a=""})=>e&&t&&t.length?rt.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[rt.jsx("p",{className:"font-medium text-gray-800",children:`${r}`}),t.map((e,t)=>{let r=e.value,n=e.name;return rt.jsx("p",{style:{color:e.color},children:`${n}: ${r?.toFixed(3)}${a}`},t)})]}):null,Fa=({data:e,selectedMetrics:t})=>{const r=dt[t]||[],a=pt[t]||"";return rt.jsx(at,{width:"100%",height:nt.height,children:rt.jsxs(Ca,{data:e,margin:nt.margin,children:[rt.jsx(st,{strokeDasharray:"3 3"}),rt.jsx(ct,{dataKey:"month"}),rt.jsx(ut,{}),"power"===t&&rt.jsx(Ia,{y:0,stroke:"#000",strokeWidth:2}),rt.jsx(it,{content:rt.jsx(Wa,{unit:a})}),rt.jsx(ot,{}),r.map(e=>rt.jsx(ca,{dataKey:e.key,name:e.name,fill:e.color},e.key))]})})},Va=({data:e,selectedMetrics:t})=>{const r=(dt[t]||[]).map(e=>({...e,strokeWidth:2})),a=pt[t]||"";return rt.jsx(at,{width:"100%",height:nt.height,children:rt.jsxs(ft,{data:e,margin:nt.margin,children:[rt.jsx(st,{strokeDasharray:"3 3"}),rt.jsx(ct,{dataKey:"time",tickFormatter:(e,t)=>t%12==0?e:"",interval:0}),rt.jsx(ut,{}),rt.jsx(it,{content:rt.jsx(Wa,{unit:a})}),rt.jsx(ot,{}),r.map(e=>rt.jsx(yt,{type:"monotone",dataKey:e.key,stroke:e.color,strokeWidth:e.strokeWidth,name:e.name,dot:!1,activeDot:{r:4}},e.key))]})})},$a=({chartType:e,setChartType:t,selectedMetrics:r,setSelectedMetrics:a})=>rt.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[rt.jsxs("div",{className:"flex gap-2",children:[rt.jsx("button",{onClick:()=>t("monthly"),className:"px-4 py-2 rounded transition-colors "+("monthly"===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ðŸ“Š Monthly Bar Chart"}),rt.jsx("button",{onClick:()=>t("daily"),className:"px-4 py-2 rounded transition-colors "+("daily"===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ðŸ“ˆ Daily Line Chart"})]}),rt.jsxs("div",{className:"flex gap-2",children:[rt.jsx("button",{onClick:()=>a("voltage"),className:"px-4 py-2 rounded transition-colors "+("voltage"===r?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"âš¡ Voltage"}),rt.jsx("button",{onClick:()=>a("power"),className:"px-4 py-2 rounded transition-colors "+("power"===r?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ðŸ”‹ Import/Export Power"}),rt.jsx("button",{onClick:()=>a("reactive"),className:"px-4 py-2 rounded transition-colors "+("reactive"===r?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"âš™ï¸ Reactive Power"})]})]}),Ha=({data:e})=>rt.jsx("div",{className:"w-full h-full",children:rt.jsx(at,{width:"100%",height:nt.height,children:rt.jsxs(_a,{children:[rt.jsx(it,{}),rt.jsx(ot,{}),rt.jsx(Dr,{data:e,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:120,label:!0,children:e.map((e,t)=>rt.jsx(Ot,{fill:lt[e.phase]||lt.default},`cell-${t}`))})]})})}),Ga=({data:e})=>rt.jsx(at,{width:"100%",height:nt.height,children:rt.jsxs(Ca,{data:e,margin:nt.margin,children:[rt.jsx(st,{strokeDasharray:"3 3"}),rt.jsx(ct,{dataKey:"month"}),rt.jsx(ut,{label:{value:"Power (kWh)",angle:-90,position:"insideLeft"}}),rt.jsx(it,{content:rt.jsx(Wa,{unit:"kWh"})}),rt.jsx(ot,{}),rt.jsx(ca,{dataKey:"A",name:"Phase A",stackId:"power",fill:lt.A}),rt.jsx(ca,{dataKey:"B",name:"Phase B",stackId:"power",fill:lt.B}),rt.jsx(ca,{dataKey:"C",name:"Phase C",stackId:"power",fill:lt.C})]})}),qa=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Ua=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),Za=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Ya={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=xt.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o,...l},s)=>xt.createElement("svg",{ref:s,...Ya,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:Ua("lucide",n),...!i&&!Za(l)&&{"aria-hidden":"true"},...l},[...o.map(([e,t])=>xt.createElement(e,t)),...Array.isArray(i)?i:[i]])),Qa=(e,t)=>{const r=xt.forwardRef(({className:r,...a},n)=>{return xt.createElement(Ja,{ref:n,iconNode:t,className:Ua(`lucide-${i=qa(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...a});var i});return r.displayName=qa(e),r},Xa=Qa("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),en=Qa("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),tn=Qa("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function rn({node:e,onClose:t}){const[r,a]=xt.useState(!1),[n,i]=xt.useState("monthly"),[o,l]=xt.useState("voltage"),s="house"===e?.type?e.HouseID:null,{monthlyData:c,loading:u,error:d}=(e=>{const[t,r]=xt.useState(null),[a,n]=xt.useState(!0),[i,o]=xt.useState(null);return xt.useEffect(()=>{(async()=>{if(e)try{n(!0);const{data:t,error:a}=await tt.from("house_monthly_metric_avg_compact").select("*").eq("house_id",e);if(a)throw a;r(t)}catch(t){o(t.message)}finally{n(!1)}})()},[e]),{monthlyData:t,loading:a,error:i}})(s),{dailyData:p,loading:f,error:y}=(e=>{const[t,r]=xt.useState(null),[a,n]=xt.useState(!0),[i,o]=xt.useState(null);return xt.useEffect(()=>{(async()=>{if(e)try{n(!0);const{data:t,error:a}=await tt.from("house_30min_metric_avg_compact").select("*").eq("house_id",e);if(a)throw a;r(t)}catch(t){o(t.message)}finally{n(!1)}})()},[e]),{dailyData:t,loading:a,error:i}})(s),m="monthly"===n?(h=c,v=bt[o]||[],h&&v?.length?Array.from({length:12},(e,t)=>{const r=t+1,a={month:new Date(2024,t,1).toLocaleString("default",{month:"short"}),monthIndex:r};return v.forEach(e=>{const t=h.find(t=>t.metric===e),n=`month_${r.toString().padStart(2,"0")}`;a[e]=t?.[n]||0}),a}):[]):((e,t)=>e&&t?.length?Array.from({length:48},(r,a)=>{const n=Math.floor(a/2),i=a%2*30,o=`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`,l=`slot_${n.toString().padStart(2,"0")}_${i.toString().padStart(2,"0")}`,s={time:o,slotIndex:a};return t.forEach(t=>{const r=e.find(e=>e.metric===t);s[t]=r?.[l]||0}),s}):[])(p,bt[o]||[]);var h,v;xt.useEffect(()=>{const e=e=>{"Escape"===e.key&&(r?a(!1):t()),"f"!==e.key&&"F"!==e.key||a(!r)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r,t]);const g=mt(),b="house"===e?.type,x="transformer"===e?.type,[j,O]=xt.useState("houses"),[w,P]=xt.useState([]),[E,A]=xt.useState({A:0,B:0,C:0}),[S,k]=xt.useState([]),[N,I]=xt.useState(!1),[D,C]=xt.useState(null);xt.useEffect(()=>{if(!x||!g?.nodes||!e)return P([]),void A({A:0,B:0,C:0});const t=g.nodes.find(t=>t.id===e.id);if(!t)return;const r=ht(g,t).filter(e=>"house"===e.type);P(r);const a=r.reduce((e,t)=>{const r=t.predicted_phase||"default";return"A"!==r&&"B"!==r&&"C"!==r||(e[r]=(e[r]||0)+1),e},{A:0,B:0,C:0});A(a)},[x,g,e]),xt.useEffect(()=>{(async()=>{if(!x||"power"!==j)return void k([]);const e=w.map(e=>e.HouseID).filter(Boolean);if(0!==e.length)try{I(!0),C(null);const{data:t,error:r}=await tt.from("house_monthly_metric_avg_compact").select("*").in("house_id",e).eq("metric","import_power");if(r)throw r;const a=w.reduce((e,t)=>(e[t.HouseID]=t.predicted_phase||"default",e),{}),n=gt.map((e,r)=>{const n=`month_${String(r+1).padStart(2,"0")}`,i={A:0,B:0,C:0};return t?.forEach(e=>{const t=a[e.house_id];if("A"===t||"B"===t||"C"===t){const r=Number(e[n])||0;i[t]+=r}}),{month:e.label,A:i.A,B:i.B,C:i.C}});k(n)}catch(t){C(t.message||"Failed to load power data")}finally{I(!1)}else k([])})()},[x,j,w]);const K=xt.useMemo(()=>[{name:"Phase A",phase:"A",value:E.A||0},{name:"Phase B",phase:"B",value:E.B||0},{name:"Phase C",phase:"C",value:E.C||0}],[E]);return e?rt.jsxs(rt.Fragment,{children:[rt.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"black",opacity:r?.5:0,transition:"opacity 700ms ease-in-out",pointerEvents:r?"auto":"none",zIndex:40}}),rt.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg shadow-2xl transition-all duration-700 ease-in-out opacity-100",style:r?vt.fullscreen:vt.normal,children:[rt.jsx("div",{className:"modal-header",children:rt.jsxs("div",{className:"modal-header-row",children:[rt.jsx("h3",{className:"modal-header-title",children:e.label}),rt.jsxs("div",{className:"modal-header-buttons",children:[rt.jsx("button",{onClick:()=>{a(!r)},className:"modal-header-button",title:r?"Exit Fullscreen":"Enter Fullscreen","aria-label":r?"Exit Fullscreen":"Enter Fullscreen",children:r?rt.jsx(en,{className:"modal-header-icon"}):rt.jsx(Xa,{className:"modal-header-icon"})}),rt.jsx("button",{onClick:t,className:"modal-header-button",title:"Close (ESC)","aria-label":"Close",children:rt.jsx(tn,{className:"modal-header-icon"})})]})]})}),rt.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[rt.jsxs("p",{className:"text-lg mb-2",children:[rt.jsx("strong",{children:"Type:"})," ",e.type]}),b&&rt.jsxs(rt.Fragment,{children:[rt.jsxs("p",{className:"mb-1",children:[rt.jsx("strong",{children:"House ID:"})," ",e.HouseID]}),rt.jsxs("p",{className:"mb-1",children:[rt.jsx("strong",{children:"Predicted Phase:"})," ",e.predicted_phase]}),rt.jsxs("p",{className:"mb-1",children:[rt.jsx("strong",{children:"Solar:"})," ",e.solar?"Yes":"No"]}),rt.jsxs("p",{className:"mb-1",children:[rt.jsx("strong",{children:"Parent Transformer:"})," ",e.parent]})]}),x&&rt.jsxs("div",{className:"mb-4",children:[rt.jsx("h4",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Transformer Analytics"}),rt.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[rt.jsx("button",{onClick:()=>O("houses"),className:"px-3 py-1 rounded "+("houses"===j?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ðŸ  Houses per Phase"}),rt.jsx("button",{onClick:()=>O("power"),className:"px-3 py-1 rounded "+("power"===j?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ðŸ“Š Monthly Power by Phase"})]}),"power"===j&&N&&rt.jsx("div",{className:"flex items-center justify-center h-48 text-gray-600",children:"Loading monthly power dataâ€¦"}),"power"===j&&D&&rt.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-700",children:D}),rt.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 "+(r?"h-[calc(100vh-400px)]":"h-96"),children:"houses"===j?rt.jsx(Ha,{data:K,title:"Houses per Phase"}):!N&&!D&&S.length>0&&rt.jsx(Ga,{data:S})})]})]}),b&&rt.jsxs("div",{className:"mb-4",children:[rt.jsx("h4",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Energy Data Visualization"}),rt.jsx($a,{chartType:n,setChartType:i,selectedMetrics:o,setSelectedMetrics:l}),("monthly"===n&&u||"daily"===n&&f)&&rt.jsxs("div",{className:"flex items-center justify-center h-64",children:[rt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),rt.jsx("span",{className:"ml-3 text-gray-600",children:"Loading energy data..."})]}),("monthly"===n&&d||"daily"===n&&y)&&rt.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[rt.jsxs("p",{className:"text-red-600",children:["âŒ Error loading data: ","monthly"===n?d:y]}),rt.jsx("p",{className:"text-sm text-red-500 mt-2",children:"Please check your internet connection and try again."})]}),!u&&!f&&!d&&!y&&rt.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 "+(r?"h-[calc(100vh-400px)]":"h-96"),children:"monthly"===n?rt.jsx(Fa,{data:m,selectedMetrics:o}):rt.jsx(Va,{data:m,selectedMetrics:o})})]})]})]}):null}export{rn as default};
